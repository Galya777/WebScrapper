# Ръководство за разработка на Уеб Скрейпър

## Съдържание
1. [Настройка на среда за разработка](#настройка-на-среда-за-разработка)
2. [Структура на проекта](#структура-на-проекта)
3. [Процес на компилация](#процес-на-компилация)
4. [Стартиране и тестване](#стартиране-и-тестване)
5. [Стил на кодиране и стандарти](#стил-на-кодиране-и-стандарти)
6. [Работен процес с контрол на версиите](#работен-процес-с-контрол-на-версиите)
7. [Откриване и отстраняване на грешки](#откриване-и-отстраняване-на-грешки)
8. [Оптимизация на производителността](#оптимизация-на-производителността)
9. [Аспекти на сигурността](#аспекти-на-сигурността)
10. [Инсталиране и внедряване](#инсталиране-и-внедряване)

## Настройка на среда за разработка

### Изисквания
- Java Development Kit (JDK) 20 или по-нова версия
- Maven 3.6.0 или по-нова версия
- Git
- Среда за разработка (IntelliJ IDEA, Eclipse или VS Code с Java разширения)

### Конфигурация на средата за разработка

#### IntelliJ IDEA
1. Импортирайте като Maven проект
2. Активирайте обработката на анотации
3. Конфигурирайте нивото на съответствие на Java компилатора на 20
4. Инсталирайте и активирайте плъгина Lombok (ако се използва)

#### VS Code
1. Инсталирайте Java Extension Pack
2. Конфигурирайте Java home в настройките
3. Инсталирайте разширението Maven for Java

## Структура на проекта

```
src/
├── main/
│   ├── java/
│   │   └── bg/university/mpr2025/
│   │       ├── Main.java          # Начална точка на приложението
│   │       ├── client/            # Имплементация на клиента
│   │       │   ├── WebScraperClient.java
│   │       │   └── handlers/      # Обработчици на заявки от страна на клиента
│   │       ├── models/            # Обекти за трансфер на данни
│   │       │   ├── ScraperRequest.java
│   │       │   └── ScraperResponse.java
│   │       ├── server/            # Имплементация на сървъра
│   │       │   ├── Server.java
│   │       │   ├── ThreadPoolServer.java
│   │       │   └── SelectorServer.java
│   │       └── utils/             # Помощни класове
│   └── resources/                 # Конфигурационни файлове
│       └── log4j2.xml             # Конфигурация на логирането
├── test/                          # Тестови файлове
└── benchmark/                     # Тестване на производителност
```

## Процес на компилация

### Компилиране на проекта
```bash
# Изчистване и компилиране
mvn clean install

# Пропускане на тестовете
mvn clean install -DskipTests

# Компилиране с конкретна Java версия
mvn clean install -Djava.version=20
```

### Създаване на изпълним JAR файл
```bash
mvn clean package
```

## Стартиране и тестване

### Изпълнение на тестове
```bash
# Изпълняване на всички тестове
mvn test

# Изпълняване на конкретен тестов клас
mvn test -Dtest=TestClassName

# Изпълняване с дебъг изход
mvn test -Dmaven.surefire.debug
```

### Покритие на кода
```bash
mvn clean test jacoco:report
# Докладът ще бъде достъпен на target/site/jacoco/index.html
```

## Стил на кодиране и стандарти

### Именуване
- Имена на пакети: с малки букви, напр. `bg.university.mpr2025.client`
- Имена на класове: PascalCase, напр. `WebScraperClient`
- Имена на методи: camelCase, напр. `processRequest`
- Константи: UPPER_SNAKE_CASE, напр. `MAX_RETRY_ATTEMPTS`

### Форматиране на кода
- Използвайте 4 интервала за отстъп
- Дължина на реда: 120 символа
- Използвайте Unix-style завършване на редове (LF)
- Използвайте таг `@author` за документация на ниво клас
- Добавяйте Javadoc за публичните методи и класове

## Работен процес с контрол на версиите

### Стратегия за клониране
- `main`: Код, готов за продукция
- `develop`: Интеграционен клон за функционалности
- `feature/*`: Клонове за функционалности
- `bugfix/*`: Корекции на грешки
- `release/*`: Подготовка за публикуване

### Формат на съобщенията за къмит
```
<тип>(<обхват>): <тема>

[незадължително тяло]

[незадължително долен колонтитул]
```

## Откриване и отстраняване на грешки

### Често срещани проблеми
1. **Връзката е отказана**
   - Проверете дали сървърът работи
   - Проверете настройките на защитната стена
   - Проверете дали портът е достъпен

2. **Проблеми с паметта**
   - Мониториране на използването на heap памет с JVisualVM
   - Конфигуриране на настройките на JVM паметта

### Отдалечено отстраняване на грешки
```bash
java -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=5005 -jar app.jar
```

## Оптимизация на производителността

### Настройки на JVM
```bash
# Примерни JVM опции
-Xms512m -Xmx2G -XX:+UseG1GC -XX:MaxGCPauseMillis=200
```

### Профилиране
- Използвайте Java Flight Recorder (JFR)
- Използвайте VisualVM или YourKit за анализ

## Аспекти на сигурността

### Валидиране на входните данни
- Валидирайте всички потребителски входни данни
- Почиствайте URL адресите преди обработка
- Имплементирайте ограничаване на заявките

### Сигурна комуникация
- Използвайте HTTPS за комуникация между клиент и сървър
- Валидирайте SSL сертификати
- Имплементирайте удостоверяване/упълномощаване

## Инсталиране и внедряване

### Изисквания
- Java Runtime Environment (JRE) 20+
- Достатъчно системни ресурси

### Инсталация
1. Копирайте JAR файла върху целевия сървър
2. Създайте конфигурационен файл (ако е необходимо)
3. Настройте променливите на средата

### Конфигурация на услуга (systemd)
```ini
[Unit]
Description=Уеб Скрейпър Услуга
After=network.target

[Service]
User=appuser
WorkingDirectory=/opt/web-scraper
ExecStart=/usr/bin/java -jar /opt/web-scraper/app.jar
SuccessExitStatus=143
TimeoutStopSec=10
Restart=on-failure
RestartSec=5

[Install]
WantedBy=multi-user.target
```

### Мониторинг
- Логвайте всички важни събития
- Настройте проверки за здравесни състояния
- Мониторирайте използването на ресурси

## Лиценз
[Вашият лиценз тук]

## Принос
[Вашите насоки за принос тук]
